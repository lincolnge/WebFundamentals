
<!DOCTYPE html>
<html lang="en" class="no-js no-touch">
  <head>

    
<meta charset="utf-8" />

<meta name="google-site-verification" content="zFM_etMkM6oOvH6CNip7QxEbslAw6kJ2kiGJBYYBIcA" />

<title>Obtain the user's current location — Web Fundamentals</title>





<meta name="author" content="https://plus.google.com/+PaulKinlan/posts" />



<meta name="description" content="The Geolocation API lets you find out where the user is, always with the user's consent." />


<link rel="canonical" href="https://developers.google.com/web/fundamentals/device-access/user-location/obtain-location">
<link rel="icon" href="/favicon.ico" />



<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta id="viewport" name="viewport" content="width=device-width, initial-scale=1" />
<meta name="google-site-verification" content="zFM_etMkM6oOvH6CNip7QxEbslAw6kJ2kiGJBYYBIcA" />

<meta name="twitter:card" content="summary">
<meta name="twitter:account_id" content="@chromiumdev" />
<meta name="twitter:site" content="@chromiumdev" />
<meta name="twitter:description" content="The Geolocation API lets you find out where the user is, always with the user's consent." />
<meta name="twitter:creator" content="paul_kinlan" />
<meta name="twitter:image:src" content="https://developers.google.com/web/imgs/logo.png" />


<link rel="author" href="https://plus.google.com/+PaulKinlan/posts">
<link rel="publisher" href="https://plus.google.com/+GoogleChromeDevelopers">

<meta itemprop="name" content="Obtain the user's current location — Web Fundamentals">
<link itemprop="image" href="https://developers.google.com/web/imgs/logo.png">
<meta itemprop="description" content="The Geolocation API lets you find out where the user is, always with the user's consent.">

<meta property="og:site_name" content="Web Fundamentals" />
<meta property="og:title" content="Obtain the user's current location — Web Fundamentals" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://developers.google.com/web/fundamentals/" />
<meta property="og:image" content="https://developers.google.com/web/imgs/logo.png" />
<meta property="og:publisher" content="https://www.facebook.com/googlechrome" />




<meta name="theme-color" content="#297ea8">


<link rel="stylesheet" media="screen" href="/css/styles.min.css" />

  </head>

  <body class="page--article article--user-location theme--user-location" itemscope itemtype="http://schema.org/TechArticle">
    

    <header class="main-header">

  <div class="google-header">
  
    <div class="google-header__top">
      <div class="container">
        <span id="beta" class="beta">
  <i class="icon icon-cog"></i>
   <a href="https://github.com/Google/WebFundamentals/tree/master/src/site/_en/fundamentals/device-access/user-location/obtain-location.markdown" target="_blank">View Source</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="https://github.com/Google/WebFundamentals/issues/new?title=Feedback%20for:%20/fundamentals/device-access/user-location/obtain-location.html" target="_blank">Submit Feedback</a>
</span>


        <a class="google-header__dev-logo" href="https://developers.google.com/">
          <img src="/imgs/developers-logo.svg" alt="Google Developers Homepage">
        </a>
      </div>
    </div>
  </div>

	




















<nav class="main-nav">

  <header class="main-nav__header">
    <span class="main-nav__current-label">Obtain the user's current location</span>
  </header>

  <ul class="main-nav__list clear">
  
    
    
    
    <li class="main-nav__item main-nav__item--web-<strong>fundamentals</strong>  main-nav__item--home  ">
      <a class="main-nav__link main-nav__link--parent" href="/fundamentals/" title="Go to Web Fundamentals">

        Web <strong>Fundamentals</strong>

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    
    <li class="main-nav__item main-nav__item--get-started  ">
      <a class="main-nav__link main-nav__link--parent" href="/fundamentals/getting-started/" title="Go to Get Started">

        Get Started

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    
    <li class="main-nav__item main-nav__item--documentation   main-nav__item--has-child">
      <a class="main-nav__link main-nav__link--parent" href="/fundamentals/#documentation" title="Go to Documentation">

        Documentation

        
        <i class="main-nav__icon icon icon-custom"></i>
        
      </a>

      

        <div class="main-nav__secondary-nav">

          <div class="main-nav__secondary-content">

            <div class="clear">
              <ul class="main-nav__list--child g-medium--2 g-wide--2">
                
                  <li class="main-nav__item--child nav-theme--principles-of-site-design">
                    <a class="main-nav__link main-nav__link--child themed--hover" title="Go to Principles of Site Design" href="/fundamentals/principles/">
                      <span class="main-nav__guide-icon icon-circle--nav themed--background"><i class="icon icon-principles-of-site-design"></i></span> Principles of Site Design <i class="main-nav__icon icon icon-chevron-right"></i>
                    </a>
                  </li>
                
                  <li class="main-nav__item--child nav-theme--multi-device-layouts">
                    <a class="main-nav__link main-nav__link--child themed--hover" title="Go to Multi-Device Layouts" href="/fundamentals/layouts/">
                      <span class="main-nav__guide-icon icon-circle--nav themed--background"><i class="icon icon-multi-device-layouts"></i></span> Multi-Device Layouts <i class="main-nav__icon icon icon-chevron-right"></i>
                    </a>
                  </li>
                
                  <li class="main-nav__item--child nav-theme--user-input">
                    <a class="main-nav__link main-nav__link--child themed--hover" title="Go to Forms and User Input" href="/fundamentals/input/">
                      <span class="main-nav__guide-icon icon-circle--nav themed--background"><i class="icon icon-user-input"></i></span> Forms and User Input <i class="main-nav__icon icon icon-chevron-right"></i>
                    </a>
                  </li>
                
                  <li class="main-nav__item--child nav-theme--look-and-feel">
                    <a class="main-nav__link main-nav__link--child themed--hover" title="Go to Look and Feel" href="/fundamentals/look-and-feel/">
                      <span class="main-nav__guide-icon icon-circle--nav themed--background"><i class="icon icon-look-and-feel"></i></span> Look and Feel <i class="main-nav__icon icon icon-chevron-right"></i>
                    </a>
                  </li>
                
                  <li class="main-nav__item--child nav-theme--introduction-to-media">
                    <a class="main-nav__link main-nav__link--child themed--hover" title="Go to Images, Video and Audio" href="/fundamentals/media/">
                      <span class="main-nav__guide-icon icon-circle--nav themed--background"><i class="icon icon-introduction-to-media"></i></span> Images, Video and Audio <i class="main-nav__icon icon icon-chevron-right"></i>
                    </a>
                  </li>
                
                  <li class="main-nav__item--child nav-theme--monetization">
                    <a class="main-nav__link main-nav__link--child themed--hover" title="Go to Monetization" href="/fundamentals/monetization/">
                      <span class="main-nav__guide-icon icon-circle--nav themed--background"><i class="icon icon-monetization"></i></span> Monetization <i class="main-nav__icon icon icon-chevron-right"></i>
                    </a>
                  </li>
                
                  <li class="main-nav__item--child nav-theme--device-access">
                    <a class="main-nav__link main-nav__link--child themed--hover" title="Go to Device Access" href="/fundamentals/device-access/">
                      <span class="main-nav__guide-icon icon-circle--nav themed--background"><i class="icon icon-device-access"></i></span> Device Access <i class="main-nav__icon icon icon-chevron-right"></i>
                    </a>
                  </li>
                
                  <li class="main-nav__item--child nav-theme--performance">
                    <a class="main-nav__link main-nav__link--child themed--hover" title="Go to Performance" href="/fundamentals/performance/">
                      <span class="main-nav__guide-icon icon-circle--nav themed--background"><i class="icon icon-performance"></i></span> Performance <i class="main-nav__icon icon icon-chevron-right"></i>
                    </a>
                  </li>
                
              </ul>
            </div>

          </div>
        </div>

      

    </li>
    
  
    
    
    
    <li class="main-nav__item main-nav__item--tools  ">
      <a class="main-nav__link main-nav__link--parent" href="/fundamentals/tools/" title="Go to Tools">

        Tools

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    
  
    
    
    
  

  </ul>
  <button class="main-nav__btn btn--toggle-nav">
    <i class="icon icon-menu"></i>
  </button>

</nav>


</header>


    <div class="article-container" itemprop="text">
      <div class="editorial-header">
        <div class="container">
          <div class="content">

            <nav class="breadcrumbs">
  <p>
  
    <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
    <a href="/fundamentals/" title="Web Fundamentals" rel="home" itemprop="url"><span itemprop="title">Web Fundamentals</span></a>
    </span>
    /
  
    <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
    <a href="/fundamentals/device-access/" title="Device Access & Integration"  itemprop="url"><span itemprop="title">Device Access & Integration</span></a>
    </span>
    /
  
    <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
    <a href="/fundamentals/device-access/user-location/" title="User Location"  itemprop="url"><span itemprop="title">User Location</span></a>
    </span>
    /
  
  </p>
</nav>



            <h1 class="tag editorial-header__title">User Location</h1>
            <h2 class="editorial-header__subtitle" itemprop="name">Obtain the user's current location</h2>

            <p class="editorial-header__excerpt" itemprop="headline">The Geolocation API lets you find out where the user is, always with the user's consent. This functionality could be used as part of user queries, for example, to guide someone to a destination point. It could also be used for 'geo-tagging' some content the user has created, for example, to mark where a photo was taken.</p>

          </div>
        </div>
      </div>

      <div class="container"><div class="content ">

    <div class="toc">
      <h3 class="toc__title">In this guide</h3>
<ol class="toc__list list-anchor" id="toc">
  <li><a href="#when-to-use-geolocation">When to use Geolocation</a></li>
  <li><a href="#check-for-compatibility">Check for Compatibility</a></li>
  <li><a href="#determine-the-users-current-location">Determine the User&#8217;s Current Location</a></li>
  <li><a href="#testing-geolocation-with-your-site">Testing Geolocation with your site</a></li>
  <li><a href="#always-handle-errors">Always Handle Errors</a></li>
  <li><a href="#reduce-the-need-to-start-up-geo-location-hardware">Reduce the need to start-up geo location hardware</a></li>
  <li><a href="#dont-keep-the-user-waiting-set-a-timeout">Don&#8217;t keep the user waiting, set a timeout</a></li>
  <li><a href="#prefer-a-coarse-location-over-a-fine-grained-location">Prefer a coarse location over a fine grained location</a></li>
</ol>

    </div>

  </div>
</div>
<div class="highlight-module  highlight-module--left   highlight-module--learning  ">
  <div class="highlight-module__container  icon-star ">
    <div class="highlight-module__content   g-wide--push-1 g-wide--pull-1  g-medium--push-1   ">
      <p class="highlight-module__title"> TL;DR</p>

      

      
        <ul class="highlight-module__list">
        
          <li>Check for Compatibility before you use the API.</li>
        
          <li>Prefer a coarse location over a fine location.</li>
        
          <li>Always handle errors.</li>
        
          <li>Don't poll for the data too frequently to save the user's battery.</li>
        
        </ul>
      
    </div>
  </div>
</div>
<div class="container">
  <div class="content">

    <p>The API is device-agnostic; it doesn&#8217;t care how the browser determines
location, so long as clients can request and receive location data in a
standard way. The underlying mechanism might be via GPS, wifi, or simply
asking the user to enter their location manually. Since any of these lookups
is going to take some time, the API is asynchronous; you pass it a callback
method whenever you request a location.</p>

    <h2 id="when-to-use-geolocation">When to use Geolocation</h2>

    <ul>
      <li>Find where the user is closest to a physical location of yours to tailor 
the user experience.</li>
      <li>Tailor information (such as news) to the user&#8217;s location.</li>
      <li>Show the position of a user on a map.</li>
      <li>Tag data created inside your application with the user&#8217;s location 
(i.e, geo-tagging a picture).</li>
    </ul>

    <h2 id="check-for-compatibility">Check for Compatibility</h2>

    <p>The geolocation API is now supported in the majority of browsers, but it is
good practice to always check for support before you do anything.</p>

    <p>You can easily check for compatibility by testing for the presence of the
geolocation object:</p>

    <div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// check for Geolocation support</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Geolocation is supported!&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Geolocation is not supported for this Browser/OS version yet.&#39;</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

    <h2 id="determine-the-users-current-location">Determine the User&#8217;s Current Location</h2>

    <p>The geolocation API offers a simple &#8216;one-shot&#8217; method to obtain the user&#8217;s
location  <code>getCurrentPosition()</code>.  A call to this method will asynchronously
report on the user&#8217;s  current location.</p>

    <div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">startPos</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">geoSuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">startPos</span> <span class="o">=</span> <span class="nx">position</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;startLat&#39;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">startPos</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;startLon&#39;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">startPos</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">(</span><span class="nx">geoSuccess</span><span class="p">);</span>
<span class="p">};</span></code></pre></div>

    <p>If this is the first time an application on this domain has requested
permissions, the browser will typically check for user consent. Depending on
the browser, there may also be preferences to always allow - or disallow -
permission lookups, in which case the confirmation process will be bypassed.</p>

    <p>Depending on the location device your browser is using, the position object
might actually contain a lot more than just latitude and longitude, for example, it could include an altitude or a direction.  You can&#8217;t tell what extra information that location system will use until it actually returns the data.</p>

    <h2 id="testing-geolocation-with-your-site">Testing Geolocation with your site</h2>

    <p>When working with HTML5 geolocation support in an application, it can be
useful to debug the output received when using different values for longitude
and latitude.</p>

    <p>The DevTools support both overriding position values for navigator.geolocation
and simulating geolocation not being available via the overrides menu.</p>

    <p><img src="images/emulategeolocation.png" /></p>

    <ol>
      <li>Open up the overrides menu in the DevTools.</li>
      <li>Check “Override Geolocation” then enter in Lat = 41.4949819 and Lon = -0.1461206.</li>
      <li>Refresh the page and it will now use your overridden positions for geolocation.</li>
    </ol>

    <h2 id="always-handle-errors">Always Handle Errors</h2>

    <p>Unfortunately, not all location lookups are successful. Perhaps a GPS could
not be located or the user has suddenly disabled location lookups. A second,
optional, argument to <code>getCurrentPosition()</code> will be called in the event of an
error, so you can notify the user inside the callback:</p>

    <div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">startPos</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">geoSuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">startPos</span> <span class="o">=</span> <span class="nx">position</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;startLat&#39;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">startPos</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;startLon&#39;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">startPos</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">geoError</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Error occurred. Error code: &#39;</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
    <span class="c1">// error.code can be:</span>
    <span class="c1">//   0: unknown error</span>
    <span class="c1">//   1: permission denied</span>
    <span class="c1">//   2: position unavailable (error response from location provider)</span>
    <span class="c1">//   3: timed out</span>
  <span class="p">};</span>
  <span class="nx">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">(</span><span class="nx">geoSuccess</span><span class="p">,</span> <span class="nx">geoError</span><span class="p">);</span>
<span class="p">};</span></code></pre></div>

    <h2 id="reduce-the-need-to-start-up-geo-location-hardware">Reduce the need to start-up geo location hardware</h2>

    <p>For many use-cases you don&#8217;t need to use the most up to date location of the user,
you just need a rough estimate.</p>

    <p>Use the <code>maximumAge</code> optional property to tell the browser to use a recently
obtained geolocation result.  This not only returns quicker if the user has
requested the data before it also stops the browser from having to start up
its geolocation hardware interfaces such as Wifi triangulation or the GPS.</p>

    <div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">startPos</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">geoOptions</span> <span class="o">=</span> <span class="p">{</span>
  	<span class="nx">maximumAge</span><span class="o">:</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">geoSuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">startPos</span> <span class="o">=</span> <span class="nx">position</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;startLat&#39;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">startPos</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;startLon&#39;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">startPos</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">geoError</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Error occurred. Error code: &#39;</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
    <span class="c1">// error.code can be:</span>
    <span class="c1">//   0: unknown error</span>
    <span class="c1">//   1: permission denied</span>
    <span class="c1">//   2: position unavailable (error response from location provider)</span>
    <span class="c1">//   3: timed out</span>
  <span class="p">};</span>

  <span class="nx">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">(</span><span class="nx">geoSuccess</span><span class="p">,</span> <span class="nx">geoError</span><span class="p">,</span> <span class="nx">geoOptions</span><span class="p">);</span>
<span class="p">};</span></code></pre></div>

    <h2 id="dont-keep-the-user-waiting-set-a-timeout">Don&#8217;t keep the user waiting, set a timeout</h2>

    <p>Unless you set a timeout, your request to get the current position might never return.</p>

    <div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">startPos</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">geoOptions</span> <span class="o">=</span> <span class="p">{</span>
     <span class="nx">timeout</span><span class="o">:</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">1000</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">geoSuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">startPos</span> <span class="o">=</span> <span class="nx">position</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;startLat&#39;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">startPos</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;startLon&#39;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">startPos</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">geoError</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Error occurred. Error code: &#39;</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
    <span class="c1">// error.code can be:</span>
    <span class="c1">//   0: unknown error</span>
    <span class="c1">//   1: permission denied</span>
    <span class="c1">//   2: position unavailable (error response from location provider)</span>
    <span class="c1">//   3: timed out</span>
  <span class="p">};</span>

  <span class="nx">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">(</span><span class="nx">geoSuccess</span><span class="p">,</span> <span class="nx">geoError</span><span class="p">,</span> <span class="nx">geoOptions</span><span class="p">);</span>
<span class="p">};</span></code></pre></div>

    <h2 id="prefer-a-coarse-location-over-a-fine-grained-location">Prefer a coarse location over a fine grained location</h2>

    <p>If you want to find the nearest store to a user it is unlikely that you need
1 meter precision to  work that out.  The API is designed to give a coarse 
location that returns as quickly as possible.</p>

    <p>If you do need high-precision it is possible to override the default setting
with the <code>enableHighAccuracy</code> option.  Use this sparingly: it will be slower
to resolve and use more battery.</p>

    <div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">startPos</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">geoOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">enableHighAccuracy</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">geoSuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">startPos</span> <span class="o">=</span> <span class="nx">position</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;startLat&#39;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">startPos</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;startLon&#39;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">startPos</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">geoError</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Error occurred. Error code: &#39;</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
    <span class="c1">// error.code can be:</span>
    <span class="c1">//   0: unknown error</span>
    <span class="c1">//   1: permission denied</span>
    <span class="c1">//   2: position unavailable (error response from location provider)</span>
    <span class="c1">//   3: timed out</span>
  <span class="p">};</span>

  <span class="nx">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">(</span><span class="nx">geoSuccess</span><span class="p">,</span> <span class="nx">geoError</span><span class="p">,</span> <span class="nx">geoOptions</span><span class="p">);</span>
<span class="p">};</span></code></pre></div>

  </div></div>


      
        


























<div class="container-medium">
  <div class="next-lessons themed--background" data-current-lesson="03">
    <h3><i class="icon icon-lessons"></i> Next Sections</h3>
    <ol class="list-lessons list-links">
  <li class="current" title="Obtain the user's current location"><a >Obtain the user's current location  <i class="icon icon-tick"></i></a></li>
  <li title="Monitor the user's location"><a  href="/fundamentals/device-access/user-location/monitor-location.html">Monitor the user's location </a></li>
  <li title="Getting the user to consent to location sharing"><a  href="/fundamentals/device-access/user-location/user-consent.html">Getting the user to consent to location sharing </a></li>
  </ol>
  </div>
</div>


      
    </div> <!-- /.article-container -->
    <div class="container clear">
	<div id="gc-content-license" class="gc-content-license g-wide--3 g-wide--last" >
		

  <p>Updated on 2014-09-19</p>


		<div class="container clear">
	<div class="g-wide--3 g-wide--last">
    
		<h4>Authors</h4>
		
		
    <a href="/fundamentals/resources/contributors/index.html#paulkinlan">
      Paul Kinlan</a>
		
    
		
	</div>
</div>

		<p>Except as otherwise noted, the content of this page is licensed under the <a href="http://creativecommons.org/licenses/by/3.0/" itemprop="license">Creative Commons Attribution 3.0 License</a>, and code samples are licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see our <a href="/site-policies">Site Policies</a>.</p>
	</div>
</div>

    <footer class="main-footer">
  <div class="main-footer__container container clear">
    <div class="main-footer__list-group">
      <ul class="main-footer__list main-footer__list--primary">
      

        
        

        
        <li class="sitemap__item sitemap__item--web-<strong>fundamentals</strong>  sitemap__item--home  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/fundamentals/" title="Go to Web Fundamentals">
            Web <strong>Fundamentals</strong>
          </a>
        </li>
        
      

        
        

        
        <li class="sitemap__item sitemap__item--get-started  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/fundamentals/getting-started/" title="Go to Get Started">
            Get Started
          </a>
        </li>
        
      

        
        

        
        <li class="sitemap__item sitemap__item--documentation   sitemap__item--has-child">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/fundamentals/#documentation" title="Go to Documentation">
            Documentation
          </a>
        </li>
        
      

        
        

        
        <li class="sitemap__item sitemap__item--tools  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/fundamentals/tools/" title="Go to Tools">
            Tools
          </a>
        </li>
        
      

        
        

        
        <li class="sitemap__item sitemap__item--resources  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/fundamentals/resources/" title="Go to Resources">
            Resources
          </a>
        </li>
        
      

        
        

        
        <li class="sitemap__item sitemap__item--web-<strong>starter-kit</strong>  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/starter-kit/" title="Go to Web Starter Kit">
            Web <strong>Starter Kit</strong>
          </a>
        </li>
        
      
      </ul>

      <div class="main-footer__google-section">
        <h3 class="main-footer__title"><a href="https://developers.google.com/">
          <img id="developers-logo-footer" src="/imgs/developers-logo_short.svg" alt="Google Developers logo">
        </a></h3>
        <ul class="main-footer__list main-footer__list--secondary google-list">
          <li><a href="http://www.google.com/">Google</a></li>
          <li><a href="http://developers.google.com/site-terms">Terms of Service</a></li>
          <li><a href="http://www.google.com/intl/en/privacy/">Privacy Policy</a></li>
          <li><a href="http://developers.google.com/careers">Careers</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>



    

<script type="text/javascript">
  (function(document) {
        var toggleDocumentationMenu = function() {
          var navBtn = document.querySelector('.main-nav__btn');
          var navList = document.querySelector('.main-nav__list');
          var navIsOpenedClass = 'nav-is-opened';
          var navListIsOpened = false;

          navBtn.addEventListener('click', function (event) {
            event.preventDefault();

            if (!navListIsOpened) {
              addClass(navList, navIsOpenedClass);
              navListIsOpened = true;
            } else {
              removeClass(navList, navIsOpenedClass);
              navListIsOpened = false;
            }
          });
        }

        var toggleMainNav = function() {
          var documentationItem =
              document.querySelector('.main-nav__item--documentation');
          var documentationLink =
              document.querySelector('.main-nav__item--documentation > .main-nav__link');
          var documentationIsOpenedClass = 'subnav-is-opened';
          var documentationIsOpened = false;

          if (documentationLink) {
            documentationLink.addEventListener('click', function (event) {
              event.preventDefault();

              if (!documentationIsOpened) {
                documentationIsOpened = true;
                addClass(documentationItem, documentationIsOpenedClass);
              } else {
                documentationIsOpened = false;
                removeClass(documentationItem, documentationIsOpenedClass);
              }

            });
          }
        }

        var isTouch = function() {
          return ('ontouchstart' in window) ||
            window.DocumentTouch && document instanceof DocumentTouch;
        };

        var addClass = function (element, className) {
          if (!element) { return; }
          element.className = element.className.replace(/\s+$/gi, '') + ' ' + className;
        }

        var removeClass = function(element, className) {
          if (!element) { return; }
          element.className = element.className.replace(className, '');
        }

        var html = document.querySelector('html');
        removeClass(html, 'no-js');
        addClass(html, 'js');

        if (isTouch()) {
          removeClass(html, 'no-touch');
          addClass(html, 'is-touch');
        }

        toggleDocumentationMenu();
        toggleMainNav();
      })(document);
</script>

  </body>
</html>

